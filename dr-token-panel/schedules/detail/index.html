<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Schedule Detail</title>
	<style>
		body{font-family:Segoe UI,Arial,sans-serif;margin:0;background:#f5f7fb}
		.container{max-width:900px;margin:20px auto;padding:0 16px}
		header{background:#fff;padding:12px 16px;border-bottom:1px solid #e6eef6}
		.card{background:#fff;padding:14px;border:1px solid #e6eaf0;border-radius:8px}
		table{width:100%;border-collapse:collapse;margin-top:12px}
		th,td{padding:8px;border-bottom:1px solid #eef2f6;text-align:left}
		.muted{color:#64748b}
		.controls a{margin-right:8px;text-decoration:none;padding:6px 8px;border-radius:6px;color:#fff;background:#06b6d4}
	</style>
</head>
<body>
	<header>
		<div class="container">
			<strong>Schedule Detail</strong>
			<nav style="float:right"><a href="../list/index.html">Back to list</a></nav>
		</div>
	</header>

	<main class="container">
		<section class="card">
			<h2 id="title">Loading...</h2>
			<div class="muted" id="meta">—</div>
			<div style="margin-top:12px" class="controls">
				<a href="../new.html">New Appointment</a>
				<a id="open-live" href="../../live-management/index.html">Open Live</a>
			</div>

			<h3 style="margin-top:16px">Patient List</h3>
			<table id="patient-table" aria-label="Patient list">
				<thead>
					<tr><th>#</th><th>Token</th><th>Name</th><th>Phone</th><th>Status</th><th>Action</th></tr>
				</thead>
				<tbody></tbody>
			</table>
		</section>
	</main>

	<script>
		function getQuery(name){
			const url = new URL(window.location.href);
			return url.searchParams.get(name);
		}
		const id = getQuery('id') || '1';
		// sample schedule data
		const schedules = {
			'1': {doctor:'Dr. Aung Aung', time:'2025-11-10 14:30', patients:[{token:1,name:'U Tun',phone:'+959123',status:'Pending'},{token:2,name:'Ma Hla',phone:'+959456',status:'Arrived'}]},
			'2': {doctor:'Dr. Khin Thandar', time:'2025-11-10 15:00', patients:[]}
		};
		const data = schedules[id] || schedules['1'];
		document.getElementById('title').textContent = data.doctor + ' — ' + data.time;
		document.getElementById('meta').textContent = `Patients: ${data.patients.length}`;
		const tbody = document.querySelector('#patient-table tbody');
		data.patients.forEach((p,idx)=>{
			const tr = document.createElement('tr');
			tr.innerHTML = `<td>${idx+1}</td><td>${p.token}</td><td>${p.name}</td><td>${p.phone}</td><td>${p.status}</td><td><a href="#" data-token="${p.token}">Edit</a> | <a href="#" data-delete="${p.token}">Delete</a></td>`;
			tbody.appendChild(tr);
		});
	</script>
</body>
</html>